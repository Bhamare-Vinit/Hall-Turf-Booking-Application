{"ast":null,"code":"var _jsxFileName = \"/home/nu11thr3ad/Desktop/Reservation Booking/src/pages/ProfilePage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport AuthContext from \"../context/auth/authContext\";\nimport { Badge, Container, Row, Col, Card } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport { formatCurrencyString } from \"use-shopping-cart\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { FaTrashAlt } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProfilePage = () => {\n  _s();\n\n  const authContext = useContext(AuthContext);\n  const [audiBookings, setAudiBookings] = useState([]);\n  const [turfBookings, setTurfBookings] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  function formatPrice(booking) {\n    return formatCurrencyString({\n      value: booking.cost,\n      currency: \"INR\",\n      language: navigator.language\n    });\n  }\n\n  const getAudi = async () => {\n    const result = await axios.get(\"/baudis\").then(res => {\n      setIsLoading(false);\n      return setAudiBookings(res.data);\n    }).catch(err => toast.error(\"Error getting Auditorium bookings.\"));\n    return result;\n  };\n\n  const deleteAudi = async id => {\n    const userFeedback = window.confirm(\"Are you sure you want to delete this booking?\");\n\n    if (userFeedback) {\n      try {\n        await axios.delete(`/baudis/${id}`).then(res => {\n          setIsLoading(false);\n          console.log(res.data);\n          const bookings = audiBookings.filter(item => item.id !== id);\n          setAudiBookings(bookings);\n          window.location.reload();\n        });\n      } catch (err) {\n        toast.error(err);\n      }\n    } else {\n      return null;\n    }\n  };\n\n  const getTurf = async () => {\n    const result = await axios.get(\"/bTurfs\").then(res => {\n      setIsLoading(false);\n      setTurfBookings(res.data);\n    }).catch(err => toast.error(\"Error getting Turf bookings.\"));\n    return result;\n  };\n\n  const deleteTurf = async id => {\n    const userFeedback = window.confirm(\"Are you sure you want to delete this booking?\");\n\n    if (userFeedback) {\n      try {\n        await axios.delete(`/bturfs/${id}`).then(res => {\n          setIsLoading(false);\n          console.log(res.data);\n          const bookings = turfBookings.filter(item => item.id !== id);\n          setTurfBookings(bookings);\n          window.location.reload();\n        });\n      } catch (err) {\n        toast.error(err);\n      }\n    } else return null;\n  };\n\n  const getBadgeAudi = (date, id) => {\n    const iso = new Date();\n    const d = new Date(iso.getFullYear(), iso.getMonth(), iso.getDate());\n    const myDate = new Date(date);\n\n    if (d > myDate) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-auto\",\n        children: [/*#__PURE__*/_jsxDEV(Badge, {\n          pill: true,\n          variant: \"danger\",\n          children: \"Past\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(FaTrashAlt, {\n          size: 20,\n          color: \"red\",\n          onClick: () => deleteAudi(id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-auto\",\n        children: /*#__PURE__*/_jsxDEV(Badge, {\n          pill: true,\n          variant: \"success\",\n          children: \"Scheduled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  const getBadgeTurf = (date, id) => {\n    const iso = new Date();\n    const d = new Date(iso.getFullYear(), iso.getMonth(), iso.getDate());\n    const myDate = new Date(date);\n\n    if (d > myDate) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-auto\",\n        children: [/*#__PURE__*/_jsxDEV(Badge, {\n          pill: true,\n          variant: \"danger\",\n          children: \"Past\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(FaTrashAlt, {\n          size: 20,\n          color: \"red\",\n          onClick: () => deleteTurf(id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-auto\",\n        children: /*#__PURE__*/_jsxDEV(Badge, {\n          pill: true,\n          variant: \"success\",\n          children: \"Scheduled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  useEffect(() => {\n    document.title = \"Profile | BookIt\";\n    authContext.loadUser();\n    getAudi();\n    getTurf(); // eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4 px-6\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"pt-4 pb-2\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Hey, \", localStorage.getItem(\"name\"), \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"mt-4 mb-2\",\n      children: \"Your Auditorium Bookings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n      count: 2,\n      height: 100\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }, this) : audiBookings.length !== 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: audiBookings.map(booking => {\n          const price = formatPrice(booking);\n          return /*#__PURE__*/_jsxDEV(Col, {\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"my-3 border-0 shadow-sm\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(Card.Title, {\n                      children: [\"Booking for : \", booking.date]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 25\n                  }, this), getBadgeAudi(booking.date, booking._id)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                  children: [\"Time :\", \" \", booking.time.length === 1 ? booking.time.map(time => time) : booking.time.map((time, i) => booking.time[i] === booking.time[booking.time.length - 1] ? time : time + \", \")]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                  children: [\"Addons :\", \" \", booking.addons.length === 0 ? \"No addons were selected\" : booking.addons.length !== 0 && booking.addons.length === 1 ? booking.addons.map(addon => addon.title) : booking.addons.map((addon, i) => i === booking.addons.length - 1 ? addon.title : addon.title + \", \")]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n                  children: [\"Cost : \", price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 19\n            }, this)\n          }, booking.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n        className: \"mt-4 mb-3\",\n        style: {\n          color: \"#a72329\"\n        },\n        children: \"You have no Auditorium Bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"mt-4 mb-2\",\n      children: \"Your Turf Bookings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(Skeleton, {\n      count: 2,\n      height: 100\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }, this) : turfBookings.length !== 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: turfBookings.map(booking => {\n          const price = formatPrice(booking);\n          return /*#__PURE__*/_jsxDEV(Col, {\n            md: 6,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"my-3 border-0 shadow-sm\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(Card.Title, {\n                      children: [\"Booking for : \", booking.date]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 25\n                  }, this), getBadgeTurf(booking.date, booking._id)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                  children: [\"Time :\", \" \", booking.time.length === 1 ? booking.time.map(time => time) : booking.time.map((time, i) => booking.time[i] === booking.time[booking.time.length - 1] ? time : time + \", \")]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                  children: [\"Addons :\", \" \", booking.addons.length === 0 ? \"No addons were selected\" : booking.addons.length !== 0 && booking.addons.length === 1 ? booking.addons.map(addon => addon.title) : booking.addons.map(addon => addon.id === booking.addons.length ? addon.title : addon.title + \", \")]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Card.Subtitle, {\n                  children: [\"Cost : \", price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 19\n            }, this)\n          }, booking.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"h6\", {\n        className: \"mt-4 mb-3\",\n        style: {\n          color: \"#a72329\"\n        },\n        children: \"You have no Turf Bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProfilePage, \"FMWKzPxqd//0a+8vF1MalAi7hEs=\");\n\n_c = ProfilePage;\nexport default ProfilePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"sources":["/home/nu11thr3ad/Desktop/Reservation Booking/src/pages/ProfilePage.jsx"],"names":["React","useState","useEffect","useContext","AuthContext","Badge","Container","Row","Col","Card","axios","toast","formatCurrencyString","Skeleton","FaTrashAlt","ProfilePage","authContext","audiBookings","setAudiBookings","turfBookings","setTurfBookings","isLoading","setIsLoading","formatPrice","booking","value","cost","currency","language","navigator","getAudi","result","get","then","res","data","catch","err","error","deleteAudi","id","userFeedback","window","confirm","delete","console","log","bookings","filter","item","location","reload","getTurf","deleteTurf","getBadgeAudi","date","iso","Date","d","getFullYear","getMonth","getDate","myDate","getBadgeTurf","document","title","loadUser","localStorage","getItem","length","map","price","_id","time","i","addons","addon","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport AuthContext from \"../context/auth/authContext\";\nimport { Badge, Container, Row, Col, Card } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport toast from \"react-hot-toast\";\nimport { formatCurrencyString } from \"use-shopping-cart\";\nimport Skeleton from \"react-loading-skeleton\";\nimport { FaTrashAlt } from \"react-icons/fa\";\n\nconst ProfilePage = () => {\n  const authContext = useContext(AuthContext);\n  const [audiBookings, setAudiBookings] = useState([]);\n  const [turfBookings, setTurfBookings] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  function formatPrice(booking) {\n    return formatCurrencyString({\n      value: booking.cost,\n      currency: \"INR\",\n      language: navigator.language,\n    });\n  }\n\n  const getAudi = async () => {\n    const result = await axios\n      .get(\"/baudis\")\n      .then((res) => {\n        setIsLoading(false);\n        return setAudiBookings(res.data);\n      })\n      .catch((err) => toast.error(\"Error getting Auditorium bookings.\"));\n    return result;\n  };\n\n  const deleteAudi = async (id) => {\n    const userFeedback = window.confirm(\n      \"Are you sure you want to delete this booking?\"\n    );\n    if (userFeedback) {\n      try {\n        await axios.delete(`/baudis/${id}`).then((res) => {\n          setIsLoading(false);\n          console.log(res.data);\n\n          const bookings = audiBookings.filter((item) => item.id !== id);\n          setAudiBookings(bookings);\n          window.location.reload();\n        });\n      } catch (err) {\n        toast.error(err);\n      }\n    } else {\n      return null;\n    }\n  };\n\n  const getTurf = async () => {\n    const result = await axios\n      .get(\"/bTurfs\")\n      .then((res) => {\n        setIsLoading(false);\n        setTurfBookings(res.data);\n      })\n      .catch((err) => toast.error(\"Error getting Turf bookings.\"));\n    return result;\n  };\n\n  const deleteTurf = async (id) => {\n    const userFeedback = window.confirm(\n      \"Are you sure you want to delete this booking?\"\n    );\n    if (userFeedback) {\n      try {\n        await axios.delete(`/bturfs/${id}`).then((res) => {\n          setIsLoading(false);\n          console.log(res.data);\n\n          const bookings = turfBookings.filter((item) => item.id !== id);\n          setTurfBookings(bookings);\n          window.location.reload();\n        });\n      } catch (err) {\n        toast.error(err);\n      }\n    } else return null;\n  };\n\n  const getBadgeAudi = (date, id) => {\n    const iso = new Date();\n    const d = new Date(iso.getFullYear(), iso.getMonth(), iso.getDate());\n    const myDate = new Date(date);\n    if (d > myDate) {\n      return (\n        <div className=\"ml-auto\">\n          <Badge pill variant=\"danger\">\n            Past\n          </Badge>{\" \"}\n          <FaTrashAlt size={20} color=\"red\" onClick={() => deleteAudi(id)} />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"ml-auto\">\n          <Badge pill variant=\"success\">\n            Scheduled\n          </Badge>\n        </div>\n      );\n    }\n  };\n\n  const getBadgeTurf = (date, id) => {\n    const iso = new Date();\n    const d = new Date(iso.getFullYear(), iso.getMonth(), iso.getDate());\n    const myDate = new Date(date);\n    if (d > myDate) {\n      return (\n        <div className=\"ml-auto\">\n          <Badge pill variant=\"danger\">\n            Past\n          </Badge>{\" \"}\n          <FaTrashAlt size={20} color=\"red\" onClick={() => deleteTurf(id)} />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"ml-auto\">\n          <Badge pill variant=\"success\">\n            Scheduled\n          </Badge>\n        </div>\n      );\n    }\n  };\n\n  useEffect(() => {\n    document.title = \"Profile | BookIt\";\n    authContext.loadUser();\n    getAudi();\n    getTurf();\n    // eslint-disable-next-line\n  }, []);\n  return (\n    <Container className=\"py-4 px-6\">\n      <Row className=\"pt-4 pb-2\">\n        <Col>\n          <h4>Hey, {localStorage.getItem(\"name\")}!</h4>\n        </Col>\n      </Row>\n      <h5 className=\"mt-4 mb-2\">Your Auditorium Bookings</h5>\n      {isLoading ? (\n        <Skeleton count={2} height={100} />\n      ) : audiBookings.length !== 0 ? (\n        <>\n          <Row>\n            {audiBookings.map((booking) => {\n              const price = formatPrice(booking);\n              return (\n                <Col md={6} key={booking.id}>\n                  <Card className=\"my-3 border-0 shadow-sm\">\n                    <Card.Body>\n                      <div className=\"d-flex\">\n                        <div>\n                          <Card.Title>Booking for : {booking.date}</Card.Title>\n                        </div>\n                        {getBadgeAudi(booking.date, booking._id)}\n                      </div>\n                      <Card.Text>\n                        Time :{\" \"}\n                        {booking.time.length === 1\n                          ? booking.time.map((time) => time)\n                          : booking.time.map((time, i) =>\n                              booking.time[i] ===\n                              booking.time[booking.time.length - 1]\n                                ? time\n                                : time + \", \"\n                            )}\n                      </Card.Text>\n                      <Card.Text>\n                        Addons :{\" \"}\n                        {booking.addons.length === 0\n                          ? \"No addons were selected\"\n                          : booking.addons.length !== 0 &&\n                            booking.addons.length === 1\n                          ? booking.addons.map((addon) => addon.title)\n                          : booking.addons.map((addon, i) =>\n                              i === booking.addons.length - 1\n                                ? addon.title\n                                : addon.title + \", \"\n                            )}\n                      </Card.Text>\n                      <Card.Subtitle>Cost : {price}</Card.Subtitle>\n                    </Card.Body>\n                  </Card>\n                </Col>\n              );\n            })}\n          </Row>\n          <hr />\n        </>\n      ) : (\n        <>\n          <h6 className=\"mt-4 mb-3\" style={{ color: \"#a72329\" }}>\n            You have no Auditorium Bookings\n          </h6>\n          <hr />\n        </>\n      )}\n      <h5 className=\"mt-4 mb-2\">Your Turf Bookings</h5>\n      {isLoading ? (\n        <Skeleton count={2} height={100} />\n      ) : turfBookings.length !== 0 ? (\n        <>\n          <Row>\n            {turfBookings.map((booking) => {\n              const price = formatPrice(booking);\n              return (\n                <Col md={6} key={booking.id}>\n                  <Card className=\"my-3 border-0 shadow-sm\">\n                    <Card.Body>\n                      <div className=\"d-flex\">\n                        <div>\n                          <Card.Title>Booking for : {booking.date}</Card.Title>\n                        </div>\n                        {getBadgeTurf(booking.date, booking._id)}\n                      </div>\n                      <Card.Text>\n                        Time :{\" \"}\n                        {booking.time.length === 1\n                          ? booking.time.map((time) => time)\n                          : booking.time.map((time, i) =>\n                              booking.time[i] ===\n                              booking.time[booking.time.length - 1]\n                                ? time\n                                : time + \", \"\n                            )}\n                      </Card.Text>\n                      <Card.Text>\n                        Addons :{\" \"}\n                        {booking.addons.length === 0\n                          ? \"No addons were selected\"\n                          : booking.addons.length !== 0 &&\n                            booking.addons.length === 1\n                          ? booking.addons.map((addon) => addon.title)\n                          : booking.addons.map((addon) =>\n                              addon.id === booking.addons.length\n                                ? addon.title\n                                : addon.title + \", \"\n                            )}\n                      </Card.Text>\n                      <Card.Subtitle>Cost : {price}</Card.Subtitle>\n                    </Card.Body>\n                  </Card>\n                </Col>\n              );\n            })}\n          </Row>\n        </>\n      ) : (\n        <>\n          <h6 className=\"mt-4 mb-3\" style={{ color: \"#a72329\" }}>\n            You have no Turf Bookings\n          </h6>\n        </>\n      )}\n    </Container>\n  );\n};\n\nexport default ProfilePage;"]},"metadata":{},"sourceType":"module"}